{"version":3,"sources":["webpack://keksobooking/./source/js/data.js","webpack://keksobooking/./source/js/util.js","webpack://keksobooking/./source/js/popups.js","webpack://keksobooking/./source/js/file-selector.js","webpack://keksobooking/./source/js/form.js","webpack://keksobooking/./source/js/api.js","webpack://keksobooking/./source/js/generate-template.js","webpack://keksobooking/./source/js/filter.js","webpack://keksobooking/./source/js/map.js"],"names":["HOUSING_TYPES_RU_TRANSLATIONS","createNearbyAdvert","author","location","offer","xCoordinate","lat","toFixed","yCoordinate","lng","avatar","title","address","price","type","rooms","guests","checkin","checkout","features","description","photos","x","y","getTranslatedHousingType","string","getNoun","number","one","two","five","n","Math","abs","showAlert","message","alertContainer","document","createElement","style","zIndex","position","left","top","right","padding","fontSize","textAlign","backgroundColor","textContent","body","append","setTimeout","remove","main","querySelector","newErrorCard","content","cloneNode","closeErrorPopupButton","newSuccessCard","onPressed","evt","key","preventDefault","closePopup","contains","removeChild","removeEventListener","addEventListener","FILE_TYPES","avatarSelector","photoSelector","avatarPreview","photoPreview","defaultAvatarPreview","defaultPhotoPreview","resetStyleAndInnerHTML","element","defaultElement","innerHTML","removeAttribute","setFileAsImage","selector","preview","file","files","fileName","name","toLowerCase","extension","some","it","endsWith","reader","FileReader","display","justifyContent","alignItems","minWidth","offsetWidth","src","result","maxWidth","maxHeight","offsetHeight","appendChild","readAsDataURL","MINIMUM_HOUSING_PRICE","ROOM_CAPACITY","setInputBorder","input","validity","valid","classList","add","adForm","filterForm","adTitle","housingType","housingPrice","checkinSelect","checkoutSelect","submitButton","resetButton","roomValue","capacityValue","adFormFields","elements","formInputs","Array","from","filter","tag","includes","tagName","disableForm","form","className","formFields","children","i","length","disabled","enableForm","updateAddress","addressInput","coordinates","value","addCustomValiditytoCapacity","setCustomValidity","Object","keys","values","join","reportValidity","resetForm","successFlag","event","Event","reset","querySelectorAll","forEach","dispatchEvent","resetMarkerAndAddress","onSuccess","titleLength","placeholder","min","onFail","fetch","method","then","response","ok","catch","sendData","FormData","target","templateCard","isEmptyStringOrUndefined","serverData","isEmptyArray","hideElement","cardElement","PRICES","typeFilterInput","priceFilterInput","roomsFilterInput","guestsFilterInput","featuresFilterFieldset","generateFilterCard","inputs","map","isNotAny","isAcceptableAd","advert","flags","push","every","feature","toString","TOKYO_CITY_CENTER_COORD","AD_PIN_ICON_ATTR","iconUrl","iconSize","iconAnchor","mapLayer","L","on","json","adverts","ads","cb","renderMarkers","delay","timeout","clearTimeout","apply","debounce","setView","tileLayer","attribution","addTo","mainPinIcon","icon","mainMarker","marker","draggable","adLayer","layerGroup","getLatLng","setLatLng","clearLayers","slice","filterAdverts","adPinIcon","bindPopup","newCard","cardTitle","cardAddress","cardPrice","cardHousingType","cardCapacity","cardOccupation","cardFeatures","cardDescription","cardPhotosContainer","cardPhoto","cardUserAvatar","featuresList","createDocumentFragment","createFeaturesElements","photoGallery","photoSources","defaultImage","photo","image","alt","createImageGallery","generateCard"],"mappings":"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","file":"main.bundle.js","sourcesContent":["//Ограничим координаты по Х и У с указанной точностью\nconst GENERATED_COORDINATE_PRECISION = 5;\nexport { GENERATED_COORDINATE_PRECISION };\n\nconst HOUSING_TYPES_RU_TRANSLATIONS = {\n  'palace': 'Дворец',\n  'flat': 'Квартира',\n  'house': 'Дом',\n  'bungalow': 'Бунгало',\n}\n\nconst createNearbyAdvert = ({author, location, offer}) => {\n  const xCoordinate = location.lat.toFixed(GENERATED_COORDINATE_PRECISION);\n  const yCoordinate = location.lng.toFixed(GENERATED_COORDINATE_PRECISION);\n\n  return {\n    author: {\n      avatar: author.avatar,\n    },\n    offer: {\n      title: offer.title,\n      address: offer.address,\n      price: offer.price,\n      type: offer.type,\n      rooms: offer.rooms,\n      guests: offer.guests,\n      checkin: offer.checkin,\n      checkout: offer.checkout,\n      features: offer.features,\n      description: offer.description,\n      photos: offer.photos,\n    },\n    location: {\n      x: xCoordinate,\n      y: yCoordinate,\n    },\n  };\n};\n\nconst getTranslatedHousingType = (string) => {\n  return HOUSING_TYPES_RU_TRANSLATIONS[string];\n}\nexport { getTranslatedHousingType };\n\n//Генерация объекта заданного размера на основании полученных данных\nconst getAdvertsNearBy = (serverData) => {\n  return serverData.map(createNearbyAdvert);\n}\n\nexport { getAdvertsNearBy };\n","//Задержка отображения окна с ошибкой\nconst ALERT_SHOW_TIME = 3000;\n//Функция по склонению существительных во множественном числе от tomfun\n//https://gist.github.com/tomfun/830fa6d8030d16007bbab50a5b21ef97\nconst getNoun = (number, one, two, five) => {\n  let n = Math.abs(number);\n\n  n %= 100;\n  if (n >= 5 && n <= 20) {\n    return five;\n  }\n\n  n %= 10;\n  if (n === 1) {\n    return one;\n  }\n\n  if (n >= 2 && n <= 4) {\n    return two;\n  }\n\n  return five;\n}\nexport { getNoun };\n//модификация дебаунс-метода из библиотеки underscore с учетом нужд проекта\n//underscorejs.org/#debounce\nconst debounce = (cb, delay) => {\n  let timeout;\n\n  return () => {\n    const later = () => {\n      timeout = null;\n      cb.apply(this);\n    };\n\n    clearTimeout(timeout);\n    timeout = setTimeout(later, delay);\n\n    if (!timeout) {\n      cb.apply(this);\n    }\n  };\n};\n\nexport { debounce };\n\nconst showAlert = (message) => {\n  const alertContainer = document.createElement('div');\n  alertContainer.style.zIndex = 100;\n  alertContainer.style.position = 'absolute';\n  alertContainer.style.left = 0;\n  alertContainer.style.top = 0;\n  alertContainer.style.right = 0;\n  alertContainer.style.padding = '10px 3px';\n  alertContainer.style.fontSize = '30px';\n  alertContainer.style.textAlign = 'center';\n  alertContainer.style.backgroundColor = 'red';\n\n  alertContainer.textContent = message;\n\n  document.body.append(alertContainer);\n\n  setTimeout(() => {\n    alertContainer.remove();\n  }, ALERT_SHOW_TIME);\n}\n\nexport { showAlert };\n","const main = document.querySelector('main');\nconst templateErrorCard = document.querySelector('#error').content;\nconst newErrorCard = templateErrorCard.querySelector('.error').cloneNode(true);\nconst closeErrorPopupButton = newErrorCard.querySelector('.error__button');\n\nconst templateSuccessCard = document.querySelector('#success').content;\nconst newSuccessCard = templateSuccessCard.querySelector('.success').cloneNode(true);\n\nconst onPressed = (evt) => {\n  if (evt.key === 'Escape' || evt.key === 'Esc') {\n    evt.preventDefault();\n    closePopup();\n  }\n}\nconst openErrorPopup = () => {\n  main.appendChild(newErrorCard);\n  document.addEventListener('keydown', onPressed);\n}\n\nexport { openErrorPopup };\n\nconst openSuccessPopup = () => {\n  main.appendChild(newSuccessCard);\n  document.addEventListener('keydown', onPressed);\n}\n\nexport { openSuccessPopup };\n\nconst closePopup = () => {\n  if (main.contains(newErrorCard)) {\n    main.removeChild(newErrorCard);\n  }\n\n  if (main.contains(newSuccessCard)) {\n    main.removeChild(newSuccessCard);\n  }\n\n  document.removeEventListener('keydown', onPressed);\n}\n\ncloseErrorPopupButton.addEventListener('click', () => {\n  closePopup();\n});\n\nnewErrorCard.addEventListener('click', () => {\n  closePopup();\n});\n\nnewSuccessCard.addEventListener('click', () => {\n  closePopup();\n});\n","const FILE_TYPES = ['gif', 'jpg', 'jpeg', 'png'];\n\nconst avatarSelector = document.querySelector('.ad-form-header__input');\nconst photoSelector = document.querySelector('.ad-form__input');\nconst avatarPreview = document.querySelector('.ad-form-header__preview');\nconst photoPreview = document.querySelector('.ad-form__photo');\n//Копии узлов для их восстановления их внешнего вида после сброса формы\n// или её отправки\nconst defaultAvatarPreview = avatarPreview.cloneNode(true);\nconst defaultPhotoPreview = photoPreview.cloneNode(true);\n\nconst isMatching = (extension) => {\n  return FILE_TYPES.some((it) => {\n    return extension.endsWith(it);\n  })\n}\n\nconst resetStyleAndInnerHTML = (element, defaultElement) => {\n  element.innerHTML = defaultElement.innerHTML;\n  element.removeAttribute('style');\n}\n\nconst resetPreviewImages = () => {\n  resetStyleAndInnerHTML(avatarPreview, defaultAvatarPreview);\n  resetStyleAndInnerHTML(photoPreview, defaultPhotoPreview);\n}\n\nexport { resetPreviewImages };\n\nconst setFileAsImage = (selector, preview) => {\n  const file = selector.files[0];\n  const fileName = file.name.toLowerCase();\n\n  if (isMatching(fileName)) {\n    const reader = new FileReader();\n\n    reader.addEventListener('load', () => {\n      preview.style.display = 'flex';\n      preview.style.justifyContent = 'center';\n      preview.style.alignItems = 'center';\n      preview.style.minWidth = preview.offsetWidth + 'px';\n      preview.style.padding = '0';\n      preview.innerHTML = '';\n\n      const element = document.createElement('img');\n\n      element.src = reader.result;\n      element.style.maxWidth = preview.offsetWidth + 'px';\n      element.style.maxHeight = preview.offsetHeight + 'px';\n\n      preview.appendChild(element);\n    });\n\n    reader.readAsDataURL(file);\n  }\n}\n\navatarSelector.addEventListener('change', () => {\n  setFileAsImage(avatarSelector, avatarPreview);\n});\n\nphotoSelector.addEventListener('change', () => {\n  setFileAsImage(photoSelector, photoPreview);\n});\n","import { GENERATED_COORDINATE_PRECISION } from './data.js';\nimport { resetMarkerAndAddress } from './map.js';\nimport { getNoun } from './util.js';\nimport { sendData } from './api.js';\nimport { openErrorPopup, openSuccessPopup } from './popups.js';\nimport { resetPreviewImages } from './file-selector.js';\n\nconst MIN_TITLE_LENGTH = 30;\nconst MAX_TITLE_LENGTH = 100;\nconst MINIMUM_HOUSING_PRICE = {\n  'palace': 10000,\n  'flat': 1000,\n  'house': 5000,\n  'bungalow': 0,\n};\nconst ROOM_CAPACITY = {\n  '1': {'1': 'для 1 гостя'},\n  '2': {'2':'для 2 гостей', '1': 'для 1 гостя'},\n  '3': {'3':'для 3 гостей', '2':'для 2 гостей', '1': 'для 1 гостя'},\n  '100': {'0': 'не для гостей'},\n};\n\nconst removeErrorBorderOnReset = () => {\n  const inputs = Array.from(adForm.querySelectorAll('.error-border'));\n  inputs.forEach((input) => {\n    if (!input.validity.valid) {\n      input.classList.remove('error-border');\n    }\n  });\n}\n\nconst setInputBorder = (input) => {\n  !input.validity.valid ? input.classList.add('error-border') : input.classList.remove('error-border');\n}\n\nconst adForm = document.querySelector('.ad-form');\nconst filterForm = document.querySelector('.map__filters');\nconst adTitle = adForm.querySelector('#title');\nconst housingType = adForm.querySelector('#type');\nconst housingPrice = adForm.querySelector('#price');\nconst checkinSelect = adForm.querySelector('#timein');\nconst checkoutSelect = adForm.querySelector('#timeout');\nconst submitButton = adForm.querySelector('.ad-form__submit');\nconst resetButton = adForm.querySelector('.ad-form__reset');\nconst roomValue = adForm.querySelector('#room_number');\nconst capacityValue = adForm.querySelector('#capacity');\nconst adFormFields = adForm.elements;\nconst formInputs = Array.from(adFormFields)\n  .filter(tag => ['select', 'textarea', 'input']\n    .includes(tag.tagName.toLowerCase()));\n\nconst disableForm = (form, className) => {\n  form.classList.add(className);\n  const formFields = form.children;\n\n  for (let i = 0; i < formFields.length; i++) {\n    formFields[i].disabled = true;\n  }\n}\n\nexport { disableForm };\n\nconst enableForm = (form, className) => {\n  form.classList.remove(className);\n  const formFields = form.children;\n\n  for (let i = 0; i < formFields.length; i++) {\n    formFields[i].disabled = false;\n  }\n}\n\nexport { enableForm };\n\nconst updateAddress = (addressInput, coordinates) => {\n  const lat = coordinates.lat.toFixed(GENERATED_COORDINATE_PRECISION);\n  const lng = coordinates.lng.toFixed(GENERATED_COORDINATE_PRECISION);\n  addressInput.value = `${lat}, ${lng}`;\n}\n\nexport { updateAddress };\n\nconst addCustomValiditytoCapacity = () => {\n  capacityValue.setCustomValidity('');\n\n  if (!Object.keys(ROOM_CAPACITY[roomValue.value]).includes(capacityValue.value)) {\n    capacityValue.setCustomValidity(`При выборе ${roomValue.value} ${getNoun(roomValue.value, 'комнаты', 'комнат', 'комнат')} доступны места:\n    ${Object.values(ROOM_CAPACITY[roomValue.value]).join(', ')}.`);\n  }\n\n  setInputBorder(capacityValue);\n  capacityValue.reportValidity();\n}\n\nconst resetForm = (successFlag) => {\n  const event = new Event('change');\n  adForm.reset();\n  removeErrorBorderOnReset();\n  resetPreviewImages();\n  filterForm.reset();\n  filterForm.dispatchEvent(event);\n  resetMarkerAndAddress();\n\n  if (successFlag) {\n    openSuccessPopup();\n  }\n\n}\n\nconst setUserFormSubmit = (onSuccess) => {\n  adForm.addEventListener('submit', (evt) => {\n    evt.preventDefault();\n\n    sendData(\n      () => onSuccess(true),\n      () => openErrorPopup(),\n      new FormData(evt.target),\n    );\n  });\n}\n\nadTitle.addEventListener('input', () => {\n  const titleLength = adTitle.value.length;\n  adTitle.setCustomValidity('');\n\n  if (titleLength < MIN_TITLE_LENGTH) {\n    adTitle.setCustomValidity(`Заголовок объявления должен содержать не менее ${MIN_TITLE_LENGTH}. Добавьте ещё ${MIN_TITLE_LENGTH - titleLength} симв.`);\n  }\n  if (titleLength > MAX_TITLE_LENGTH) {\n    adTitle.setCustomValidity(`Заголовок объявления должен быть короче ${MIN_TITLE_LENGTH} символов. Удалите лишние ${titleLength - MAX_TITLE_LENGTH} симв.`);\n  }\n\n  setInputBorder(adTitle);\n  adTitle.reportValidity();\n});\n\nhousingPrice.addEventListener('input', () => {\n  const price = housingPrice.value;\n  housingPrice.setCustomValidity('');\n\n  if (price < MINIMUM_HOUSING_PRICE[housingType.value]) {\n    housingPrice.setCustomValidity(`Цена не может быть менее ${MINIMUM_HOUSING_PRICE[housingType.value]}`);\n  }\n\n  setInputBorder(housingPrice);\n  housingPrice.reportValidity();\n});\n\nhousingType.addEventListener('change', () => {\n  housingPrice.placeholder = MINIMUM_HOUSING_PRICE[housingType.value];\n  housingPrice.min = MINIMUM_HOUSING_PRICE[housingType.value];\n});\n\ncheckinSelect.addEventListener('change', () => {\n  checkoutSelect.value = checkinSelect.value;\n});\n\ncheckoutSelect.addEventListener('change', () => {\n  checkinSelect.value = checkoutSelect.value;\n});\n\nsubmitButton.addEventListener('click', () => {\n  formInputs.forEach((input) => {\n    setInputBorder(input);\n  });\n});\n\nroomValue.addEventListener('change', addCustomValiditytoCapacity);\ncapacityValue.addEventListener('change', addCustomValiditytoCapacity);\n\nresetButton.addEventListener('click', (evt) => {\n  evt.preventDefault();\n  resetForm(false)\n});\n\nsetUserFormSubmit(resetForm);\n","const getData = (onSuccess, onFail) => {\n  fetch('https://22.javascript.pages.academy/keksobooking/data')\n    .then((response) => {\n      if (response.ok) {\n        return response.json();\n      }\n\n      onFail('Не удалось получить данные с сервера. Попробуйте ещё раз');\n    })\n    .then((adverts) => {\n      onSuccess(adverts);\n    })\n    .catch(() => {\n      onFail('Не удалось получить данные с сервера. Попробуйте ещё раз');\n    });\n}\n\nexport { getData };\n\nconst sendData = (onSuccess, onFail, body) => {\n  fetch(\n    'https://22.javascript.pages.academy/keksobooking',\n    {\n      method: 'POST',\n      body,\n    },\n  )\n    .then((response) => {\n      if (response.ok) {\n        onSuccess();\n      } else {\n        onFail();\n      }\n    })\n    .catch(() => {\n      onFail();\n    });\n}\n\nexport { sendData };\n","import { getTranslatedHousingType } from './data.js';\nimport { getNoun } from './util.js';\n\nconst templateCard = document.querySelector('#card').content;\n\nconst isEmptyStringOrUndefined = (serverData) => {\n  return !serverData;\n}\n\nconst isEmptyArray = (serverData) => {\n  return (serverData.length === 0);\n}\n\nconst hideElement = (cardElement) => {\n  return cardElement.classList.add('visually-hidden');\n}\n\nconst generateStringForCapacity = (rooms, guests) => {\n  return `${rooms} ${getNoun(rooms, 'комната', 'комнаты', 'комнат')} для ${guests} ${getNoun(guests, 'гостя', 'гостей', 'гостей')}`;\n}\n\nconst generateStringForOccupationTime = (checkin, checkout) => {\n  return `Заезд после ${checkin}, выезд до ${checkout}`;\n}\n\nconst createFeaturesElements = (features) => {\n  const featuresList = document.createDocumentFragment();\n\n  features.forEach((feature) => {\n    const element = document.createElement('li');\n    element.classList.add('popup__feature');\n    element.classList.add(`popup__feature--${feature}`);\n\n    featuresList.appendChild(element);\n  });\n\n  return featuresList;\n}\n\nconst createImageGallery = (photoSources, defaultImage) => {\n  const photoGallery = document.createDocumentFragment();\n\n  photoSources.forEach((photo) => {\n    const image = defaultImage.cloneNode(true);\n    image.src = photo;\n    image.alt = 'Фотография жилья';\n\n    photoGallery.appendChild(image);\n  });\n\n  return photoGallery;\n}\n\nconst generateCard = ({ author, offer}) => {\n  const newCard = templateCard.querySelector('.popup').cloneNode(true);\n  const cardTitle = newCard.querySelector('.popup__title');\n  const cardAddress = newCard.querySelector('.popup__text--address');\n  const cardPrice = newCard.querySelector('.popup__text--price');\n  const cardHousingType = newCard.querySelector('.popup__type');\n  const cardCapacity = newCard.querySelector('.popup__text--capacity');\n  const cardOccupation = newCard.querySelector('.popup__text--time');\n  const cardFeatures = newCard.querySelector('.popup__features');\n  const cardDescription = newCard.querySelector('.popup__description');\n  const cardPhotosContainer = newCard.querySelector('.popup__photos');\n  const cardPhoto = cardPhotosContainer.querySelector('.popup__photo');\n  const cardUserAvatar = newCard.querySelector('.popup__avatar');\n\n  if (isEmptyStringOrUndefined(offer.title)) {\n    hideElement(cardTitle);\n  } else {\n    cardTitle.textContent = offer.title;\n  }\n\n  if (isEmptyStringOrUndefined(offer.address)) {\n    hideElement(cardAddress);\n  } else {\n    cardAddress.textContent = offer.address;\n  }\n\n  if (isEmptyStringOrUndefined(offer.price)) {\n    hideElement(cardPrice);\n  } else {\n    cardPrice.textContent = `${offer.price} ₽/ночь`;\n  }\n\n  if (isEmptyStringOrUndefined(getTranslatedHousingType(offer.type))) {\n    hideElement(cardHousingType);\n  } else {\n    cardHousingType.textContent = getTranslatedHousingType(offer.type);\n  }\n\n  if (isEmptyStringOrUndefined(offer.rooms) || isEmptyStringOrUndefined(offer.guests)) {\n    hideElement(cardCapacity);\n  } else {\n    cardCapacity.textContent = generateStringForCapacity(offer.rooms, offer.guests);\n  }\n\n  if (isEmptyStringOrUndefined(offer.checkin) || isEmptyStringOrUndefined(offer.checkout)) {\n    hideElement(cardOccupation);\n  } else {\n    cardOccupation.textContent = generateStringForOccupationTime(offer.checkin, offer.checkout);\n  }\n\n  if (isEmptyStringOrUndefined(offer.description)) {\n    hideElement(cardDescription);\n  } else {\n    cardDescription.textContent = offer.description;\n  }\n\n  if (isEmptyStringOrUndefined(author.avatar)) {\n    hideElement(cardUserAvatar);\n  } else {\n    cardUserAvatar.src = author.avatar;\n  }\n\n  if (isEmptyArray(offer.features)) {\n    hideElement(cardFeatures);\n  } else {\n    cardFeatures.innerHTML = '';\n    cardFeatures.appendChild(createFeaturesElements(offer.features));\n  }\n\n  if (isEmptyArray(offer.photos)) {\n    hideElement(cardPhotosContainer);\n  } else {\n    const photoGallery = createImageGallery(offer.photos, cardPhoto);\n    cardPhotosContainer.innerHTML = '';\n    cardPhotosContainer.appendChild(photoGallery);\n  }\n\n  return newCard;\n}\n\nexport { generateCard };\n","const PRICES = {\n  'low': 10000,\n  'high': 50000,\n  'any': 0,\n}\n\nconst filterForm = document.querySelector('.map__filters');\nconst typeFilterInput = filterForm.querySelector('#housing-type');\nconst priceFilterInput = filterForm.querySelector('#housing-price');\nconst roomsFilterInput = filterForm.querySelector('#housing-rooms');\nconst guestsFilterInput = filterForm.querySelector('#housing-guests');\nconst featuresFilterFieldset = filterForm.querySelector('#housing-features');\n\nconst getSelectedFeatures = (inputs) => {\n  return Array.from(inputs.querySelectorAll('input:checked'))\n    .map(input => input.value);\n}\n\nconst generateFilterCard = () => {\n  return {\n    price: priceFilterInput.value,\n    type: typeFilterInput.value,\n    rooms: roomsFilterInput.value,\n    guests: guestsFilterInput.value,\n    features: getSelectedFeatures(featuresFilterFieldset),\n  }\n}\n\nlet filter = generateFilterCard();\n\nconst isNotAny = (string) => {\n  return string !== 'any';\n}\n\nconst isAcceptableAd = (advert) => {\n  let flags = [];\n\n  if (filter.features.length !== 0) {\n    flags.push(filter.features.every(feature => advert.offer.features.includes(feature)));\n  }\n\n  if (isNotAny(filter.price)) {\n    switch (filter.price) {\n      case 'low':\n        flags.push(advert.offer.price < PRICES[filter.price]);\n        break;\n      case 'high':\n        flags.push(advert.offer.price > PRICES[filter.price]);\n        break;\n      case 'middle':\n        flags.push((advert.offer.price >= PRICES['low']) && (advert.offer.price <= PRICES['high']));\n        break;\n    }\n  }\n\n  if (isNotAny(filter.type)) {\n    flags.push(filter.type === advert.offer.type);\n  }\n\n  if (isNotAny(filter.rooms)) {\n    flags.push(filter.rooms === advert.offer.rooms.toString())\n  }\n\n  if (isNotAny(filter.guests)) {\n    flags.push(filter.guests === advert.offer.guests.toString())\n  }\n\n  return !flags.includes(false);\n}\n\nconst filterAdverts = (adverts) => {\n  return adverts.slice().filter(isAcceptableAd);\n}\n\nexport { filterAdverts };\n\nconst setFilterChange = (cb) => {\n  filterForm.addEventListener('change', () => {\n    filter = generateFilterCard();\n    cb();\n  });\n}\n\nexport { setFilterChange };\n","/* global L:readonly */\nimport { disableForm, enableForm, updateAddress } from './form.js';\nimport { getAdvertsNearBy } from './data.js';\nimport { generateCard } from './generate-template.js';\nimport { getData } from './api.js';\nimport { showAlert, debounce } from './util.js';\nimport { setFilterChange, filterAdverts } from './filter.js';\n\nconst RENDER_DELAY = 500;\nconst ADVERTS_QTY = 10;\nconst TOKYO_CITY_CENTER_COORD = {\n  lat: 35.652832,\n  lng: 139.839478,\n}\n\nexport { TOKYO_CITY_CENTER_COORD };\n\nconst ZOOM = 8.4;\nconst MAIN_PIN_ICON_ATTR = {\n  iconUrl: './img/main-pin.svg',\n  iconSize: [52, 52],\n  iconAnchor: [26, 52],\n}\nconst AD_PIN_ICON_ATTR = {\n  iconUrl: './img/pin.svg',\n  iconSize: [26, 26],\n  iconAnchor: [13, 26],\n}\n\nconst mapLayer = document.querySelector('#map-canvas');\n\nconst adForm = document.querySelector('.ad-form');\nconst filterForm = document.querySelector('.map__filters');\nconst addressInput = adForm.querySelector('#address');\n\n//Отключение формы при инициализации страницы до загрузки карты\ndisableForm(adForm, 'ad-form--disabled');\ndisableForm(filterForm, 'map__filters--disabled');\n\nconst map = L.map(mapLayer)\n  .on('load', () => {\n    enableForm(adForm, 'ad-form--disabled');\n    updateAddress(addressInput, TOKYO_CITY_CENTER_COORD);\n    getData((ads) => {\n      const adverts = getAdvertsNearBy(ads);\n      enableForm(filterForm, 'map__filters--disabled');\n      renderMarkers(adverts);\n      setFilterChange(debounce(\n        () => renderMarkers(adverts),\n        RENDER_DELAY,\n      ));\n    }, showAlert);\n  })\n  .setView(TOKYO_CITY_CENTER_COORD, ZOOM);\n\nL.tileLayer(\n  'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n  {\n    attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n  },\n).addTo(map);\n\nconst mainPinIcon = L.icon(MAIN_PIN_ICON_ATTR);\n\nconst mainMarker = L.marker(\n  TOKYO_CITY_CENTER_COORD,\n  {\n    draggable: true,\n    icon: mainPinIcon,\n  },\n);\n//Слой для всех пинов с объявлениями\nconst adLayer = L.layerGroup().addTo(map);\n\nmainMarker.addTo(map);\nmainMarker.on('moveend', (evt) => {\n  updateAddress(addressInput, evt.target.getLatLng());\n});\n\nconst resetMarkerAndAddress = () => {\n  map.setView(TOKYO_CITY_CENTER_COORD, ZOOM);\n  map.closePopup();\n  mainMarker.setLatLng(TOKYO_CITY_CENTER_COORD);\n  updateAddress(addressInput, TOKYO_CITY_CENTER_COORD);\n}\n\nexport { resetMarkerAndAddress };\n\nconst renderMarkers = (adverts) => {\n  map.closePopup();\n  adLayer.clearLayers();\n  filterAdverts(adverts).slice(0, ADVERTS_QTY).forEach((advert) => {\n    const adPinIcon = L.icon(AD_PIN_ICON_ATTR);\n    const adMarker = L.marker(\n      {\n        lat: advert.location.x,\n        lng: advert.location.y,\n      },\n      {\n        icon: adPinIcon,\n      },\n    );\n\n    adMarker.addTo(adLayer)\n      .bindPopup(generateCard(advert));\n  });\n}\n"],"sourceRoot":""}